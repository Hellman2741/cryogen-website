script.
  var toggled = false;
  $(document).ready(function() {
  
    var close = 'Click to close search bar.';
    var open = 'Click to open search bar.';
    
    $('#search-preport-icon').attr('title', open);
  
    //click for actions
    $('#caction').click(function() {
      var cnt = $(this).find('.dropdwn-cnt');
      if(toggled) {
        cnt.removeClass('dropdwn-show');
      } else {
        cnt.addClass('dropdwn-show');
      }
      toggled = !toggled;
    });
    
    $(document).on('click', '#return-but', function() {
      $.post('/staff', { mod:'preport', action:'view-list' }, function(ret) {
        var data = JSON.parse(ret);
        if(data.html == null || data.html == "") {
          sendAlert('Session expired! Please reload the page to login again.');
          return;
        }
        if(!data.success) {
          sendAlert(data.error);
          return;
        }
        $('#preport-main').html(data.html);
      });
    });
    
    //click view button
    $(document).on('click', '#view', function() {
      var tr = $(this).closest('tr');
      var id = tr.data('id');
      $.post('staff', { mod:'preport', action:'view-report', id:id }, function(ret) {
        var data = JSON.parse(ret);
        if(data.html == null || data.html == "") {
          sendAlert('Session expired! Please reload the page to login again.');
          return;
        }
        if(!data.success) {
          sendAlert(data.error);
          return;
        }
        $('#preport-info').html('Currently viewing report');
        $('#preport-main').html(data.html);
        $('#view-preport').css('visibility', '');
        $('#preport-auth').html(data.display);
      });
    });
    
    //click search icon
    $('#search-preport-icon').click(function() {
      var icon = $(this);
      var search = $('#search-in');
      var user = search.find('input').val();
      var att = search.attr('display');
      if(att == 'none') {
        icon.attr('title', close);
        search.attr('display', 'inline');
        search.show('slide', {direction: 'right'}, 1000);
      } else {
        if(user == '') {
          search.hide('slide', {direction: 'right'}, 1000, function() {
            search.attr('display', 'none');
            icon.attr('title', open);
          });
          return;
        }
        $('#search-error').css('display', '');
        $('#search-error').html('error');
        $('#search-error').fadeOut(5000);
      }
    });
    
    function sendAlert(text) {
      var n = noty({
        text: text,
        layout: 'topRight',
        timeout: 5000,
        theme: 'cryogen'
      });
    }
  
  });
div.tab-pane.fade(id='preports')
  div.row 
    div.iactions
      div
        div(style='float: left; margin: 10px 10px;')
          h5.color-grey Player Reports
            h6.color-grey#preport-info Currently viewing all active player reports
        div(style='float: right; margin: 33.5px 5px;')
          div.link
            i.fa.fa-archive
            span  Archive
  div.row(style='padding: 15px;')
    div#search-preport(style='clear: both; float: right; margin-bottom: 15px; text-align: right;')
      p.color-grey.search-info(style='font-size: 11px; max-width: 200px; display: inline-block;') Click the search icon to begin searching for a report. Search with criteria using name:, or type:
      p.color-grey.search-info(style='font-size: 11px; max-width: 200px; display: inline-block;') Example: name: cody, type: ban - what
        br
        span Will search for any bans for user 'Cody' with 'what' in the title.
      p.color-red#search-error(style='display: none')
      div
        span.glyphicon.glyphicon-search.link#search-preport-icon(style='display: inline; float: right; padding-left: 5px; margin-top: 7px;')
        div#search-in(style='float: right; display: none;', display='none')
          input.form-control(type='text', placeholder='Search', style='max-width: 150px; max-height: 30px; background: #111; border: #000; display: inline!important;')
    div.col-md-12(style='border: 1px solid #000; clear: both; margin-bottom: 10px;')
    div#preport-main
      include report_list
