extend ../default

block head
	script.
		$(document).ready(function() {
			var section = window.location.hash;
			if(section != null && section != "")
				$('.nav-tabs a[href="'+section+'"]').tab('show');


				$('.nav-tabs a').click(function (e) {
					$(this).tab('show');
					window.location.hash = this.hash;
				});

				$(document).on('click', '#pin', function() {
					var tr = $(this).closest('tr');
					var id = tr.data('id');
					var type = tr.data('type');
					var mod = type == 'PLAYER' ? 'preport' : type == 'BUG' ? 'breport' : 'appeal';
					$.post('/staff', { mod:mod, action:'click-pin', id:id }, function(ret) {
						var data = JSON.parse(ret);
						if(!data.success) {
							alert(data.error);
							return;
						}
						$('#immediate-main').html(data.immediate);
						if(data.preports != '')
							$('#preport-main').html(data.preports);
						if(data.breports != '')
							$('#breport-main').html(data.breports);
						if(data.appeals != '')
							$('#appeal-main').html(data.appeals);
					});
				});
		});

block content
	svg(style='display: none; style="position: absolute; width: 0; height: 0; overflow: hidden;', version='1.1', xmlns='http://www.w3.org/2000/svg', xmlns:xlink="http://www.w3.org/1999/xlink")
		defs
			symbol#icon-hammer2(viewBox='0 0 32 32')
				title hammer2
				path(d='M31.568 28.617l-17.145-15.608 0.798-0.8c0.653-0.655 1.006-1.501 1.060-2.363 0.031-0.014 0.063-0.028 0.092-0.045l3.218-2.013c0.435-0.512 0.404-1.321-0.071-1.797l-5.598-5.613c-0.475-0.476-1.281-0.508-1.792-0.071l-2.007 3.227c-0.016 0.030-0.031 0.061-0.045 0.093-0.859 0.054-1.703 0.408-2.356 1.063l-3.045 3.053c-0.653 0.655-1.006 1.501-1.060 2.363-0.031 0.014-0.063 0.029-0.093 0.045l-3.218 2.013c-0.436 0.512-0.404 1.321 0.071 1.797l5.598 5.613c0.475 0.476 1.281 0.508 1.792 0.071l2.007-3.227c0.017-0.030 0.031-0.061 0.045-0.093 0.859-0.054 1.703-0.408 2.356-1.063l0.884-0.887 15.566 17.191c0.451 0.498 1.147 0.579 1.546 0.178l1.574-1.578c0.399-0.4 0.319-1.098-0.178-1.55z')
	div.container.account-area(style='min-height: 600px; padding: 20px 0;')
		div.row
			div.col-md-3
				ul.nav.nav-tabs
					li.nav.active.account-item
						a(href='#overview', data-toggle='tab') Overview
					li.nav.account-item
						a.vote(href='#preports', data-toggle='tab') Player Reports
					if user.getRights() > 1
						li.nav.account-item
							a(href='#breports', data-toggle='tab') Bug Reports
					li.nav.account-item
						a(href="#appeals", data-toggle="tab") Appeals
					li.nav.account-item
						a(href='#punishments', data-toggle='tab') Punishments
			div.col-md-9
				div.widget
					div.tab-content.content
						include overview/overview
						include player_reports/index
						include bug_reports/index
						include appeals/index
						include punishments/index
